<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Система автоматики Yss</title>
    <meta name="description" content="Версия 0.2">
    <meta name="author" content="Yss">
	<link href="/css/bootstrap.min.css" type="text/css" rel="stylesheet" />
	<script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/jquery.min.js"></script>
	<script type="text/javascript" src="/js/timepicker.min.js"></script>
	
</head>
<body style="background-color:#d9ffb3;">
	<nav class="navbar navbar-light bg-light navbar-expand-lg">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">Параметры системы рабочего стола</a>
		<ul class="nav nav-pills">
			<li class="nav-item">
			  <a class="nav-link" href="/">Home</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link active"  aria-current="page" href="#">Main</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="/upd.htm">Update</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="/log">Log</a>
			</li>
			<li class="nav-item">
			  <a class="nav-link" href="/reboot">Reboot</a>
			</li>
		  </ul>
		  </div>
		</nav>
		
		
		
		<div class="panel panel-default col-md-offset-1 col-md-10">
			
			<div class="panel-body">		
				<div class="col-md-4">
					<form>
						<h2>1. Релейный блок</h2>
						<div class="form-check form-switch">
							<input class="form-check-input" name="REL1" type="checkbox" value="" id="REL1">
							<label class="form-check-label" for="REL1">
							  Рэле 1
							</label>
						  </div>
						  <div class="form-check form-switch">
							<input class="form-check-input" name="REL2" type="checkbox" value="" id="REL2">
							<label class="form-check-label" for="REL2">
							  Рэле 2
							</label>
						  </div>
						  <div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" value="" name="REL3" id="REL3">
							<label class="form-check-label" for="REL3">
							  Рэле 3
							</label>
						  </div>
												
						  <div class="form-check form-switch">
							<input class="form-check-input" type="checkbox" value="" name="REL4" id="REL4">
							<label class="form-check-label" for="REL4">
							  Рэле 4
							</label>
						  </div>
					</form>
				</div>
				

	

				<div class="col-md-4">
					<form>
						<h2>2. Лампа</h2>
						<div class="input-group mb-3  alert alert-info" role="alert">
						<label for="LIGHT_CW" class="form-label">Свет CW</label>
						<input type="range" class="form-range" min="0" max="256" step="32" id="LIGHT_CW">
						</div>
						<div class="input-group mb-3  alert alert-light" role="alert">
						<label for="LIGHT_NW" class="form-label">Свет NW</label>
						<input type="range" class="form-range" min="0" max="256" step="32" id="LIGHT_NW">
						</div>
						<div class="input-group mb-3  alert alert-warning" role="alert">
						<label for="LIGHT_WW" class="form-label">Свет WW</label>
						<input type="range" class="form-range" min="0" max="256" step="32" id="LIGHT_WW">
						</div>
					</form>
				</div>

				<div class="col-md-4" id="LOGSHOW">
						
				</div>

				<div class ="col-md-4">	
					<form>
						<div class="input-group mb-3">			
							<label class="input-group-text" for="time">Время</label>  
							<input class="time form-control" id="time" type="text" value="" />
							</div>
		
							<div class="input-group mb-3">
							<label class="input-group-text" for="PERIOD">Периодичность</label>
							<select id="PERIOD" name="PERIOD" class="form-select" aria-label="Выбор периода">
								<option value="1">Единожды</option>
								<option value="2">Ежечасно</option>
								<option value="3">Ежедневно</option>
								<option value="4">Рабочие дни</option>
								<option value="5">Выходные дни</option>
								<option value="7">Понедельник</option>
								<option value="8">Вторник</option>
								<option value="9">Среда</option>
								<option value="10">Четверг</option>
								<option value="11">Пятница</option>
								<option value="12">Суббота</option>
								<option value="6">Воскресенье</option>
							</select>
						</div>
							<div class="input-group mb-3">
							<label class="input-group-text" for="TIMERNO">Будильнк №</label>
							<select id="TIMERNO" name="TIMERNO" class="form-select" aria-label="Выбор будильника">
								<option value="0">1</option>
								<option value="1">2 (свет)</option>
								<option value="2">3</option>
								<option value="3">4</option>
								<option value="4">5</option>
								<option value="5">6</option>
								<option value="6">7</option>
								<option value="7">8</option>
								<option value="8">9</option>
								<option value="9">10</option>
							</select>
						</div>
					<div class="input-group mb-3">			
						
						<a type="button" class="btn btn-lg btn-success" id="BTN1"><i class="fa fa-bed fa-2x pull-left">Set an alarm</i></a>
					</div>

					<div class="input-group mb-3">			
						<a type="button" class="btn btn-lg btn-success" id="BTN2"><i class="fa fa-bed fa-2x pull-left">All alarms</i></a>
					</div>

					<div class="input-group mb-3">			
						<a type="button" class="btn btn-lg btn-success" id="BTN3"><i class="fa fa-bed fa-2x pull-left">Active alarm</i></a>
					</div>

					<div class="input-group mb-3">			
						<a type="button" class="btn btn-lg btn-success" id="BTN4"><i class="fa fa-bed fa-2x pull-left">Reset alarms</i></a>
					</div>


					<div class="input-group mb-3">		
						<a type="button" class="btn btn-lg btn-success" id="BTN5"><i class="fa fa-bed fa-2x pull-left">Sleep</i></a>
					</div>
				</form>
				</div>



				<div class="col-md-4">
					<form>
						<h2>2. Customs Radios</h2>

						<div class="form-button">
							<a type="button" class="btn btn-lg btn-success" id="DEVICES" onclick="getI2CDevs()"><i class="fa fa-bed fa-2x pull-left">I2C Devices</i></a>
						</div>

						<div class="alert alert-success" role="alert" id="DEVSHOW" ></div>
							
						<div class="form-button">
							<a type="button" class="btn btn-lg btn-success" id="FUNC1"><i class="fa fa-bed fa-2x pull-left">FUNCTION-1</i></a>
						</div>

						<div class="form-check">
							<label>
								<input type="radio" name="radio" checked> <span class="label-text">Option 01</span>
							</label>
						</div>
						<div class="form-check">
							<label>
								<input type="radio" name="radio"> <span class="label-text">Option 02</span>
							</label>
						</div>
						<div class="form-check">
							<label>
								<input type="radio" name="radio"> <span class="label-text">Option 03</span>
							</label>
						</div>
						<div class="form-check">
							<label>
								<input type="radio" name="radio" disabled> <span class="label-text">Option 04</span>
							</label>
						</div>
					</form>
				</div>
				<div class="col-md-4">
					<form>
						<h2>3.Radios Toggles</h2>
						<div class="form-check">
							<label class="toggle">
								<input type="radio" name="toggle" checked> <span class="label-text">Option 01</span>
							</label>
						</div>
						<div class="form-check">
							<label class="toggle">
								<input type="radio" name="toggle"> <span class="label-text">Option 02</span>
							</label>
						</div>
						<div class="form-check">
							<label class="toggle">
								<input type="radio" name="toggle"> <span class="label-text">Option 03</span>
							</label>
						</div>
						<div class="form-check">
							<label class="toggle">
								<input type="radio" name="toggle" disabled> <span class="label-text">Option 04</span>
							</label>
						</div>
						
					</form>
				</div>
			</div>
		</div>
	
 
 <script type="text/javascript">
	$(document).ready(function(){
	process();
	$('.time').clockTimePicker({
		precision:5
	});

	$('.time').prop('value','12:00');

	$('#BTN1').on('click',function(){  
			
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&BTN1="+$('#time').prop('value')+"*"+$('#PERIOD').prop('value')+"-"+$('#TIMERNO').prop('value'),  
                    success: function(html){  
                    }  
			}); 
                return false;  
            });  

			$('#BTN2').on('click',function(){  
			
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&BTN2=0",  
                    success: function(html){  
                    }  
			}); 
                return false;  
            });

			$('#BTN3').on('click',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&BTN3=0",  
                    success: function(html){  
                    }  
			}); 
                return false;  
            });


			$('#BTN4').on('click',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&BTN4=0",  
                    success: function(html){  
                    }  
			}); 
                return false;  
            });


	$('#REL1').on('input',function(){  
			
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&REL1="+$('#REL1').prop("checked"),  
                    success: function(html){  
                    }  
			}); 
                return false;  
            });  
			
			$('#REL2').on('input',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&REL2="+$('#REL2').prop("checked"),  
                    success: function(html){  
                    }  
			}); 
                return false;  
            });  

			$('#REL3').on('input',function(){  
			
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&REL3="+$('#REL3').prop("checked"),  
                    success: function(html){  
                    }  
			}); 
                return false;  
			});  
			
			$('#REL4').on('input',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&REL4="+$('#REL4').prop("checked"),   
                    success: function(html){  
                    }  
			}); 
                return false;  
			});  
			
			$('#FUNC1').on('click',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&FUNC1=true",  
                    success: function(html){  
                    }  
			}); 
                return false;  
			});  

			


			$('#LIGHT_CW').on('change',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&LIGHT_CW="+($('#LIGHT_CW').prop("value")>255?255:$('#LIGHT_CW').prop("value")),  
                    success: function(html){  
                    }  
			}); 
                return false;  
			});  

			$('#LIGHT_NW').on('change',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&LIGHT_NW="+($('#LIGHT_NW').prop("value")>255?255:$('#LIGHT_NW').prop("value")),  
                    success: function(html){  
                    }  
			}); 
                return false;  
			});  

			$('#LIGHT_WW').on('change',function(){  
			$.ajax({  
                    type: "POST",  
                    url: "/post",  
                    data: "page=main&LIGHT_WW="+($('#LIGHT_WW').prop("value")>255?255:$('#LIGHT_WW').prop("value")),  
                    success: function(html){  
                    }  
			}); 
                return false;  
			});  

	});
	
	


	function process(){
		$.getJSON(
		"/getdata",
		{page:"main"},
		function(data){
			$('#REL1').prop('checked', data['REL1']==1);
			$('#REL2').prop('checked', data['REL2']==1);
			$('#REL3').prop('checked', data['REL3']==1);
			$('#REL4').prop('checked', data['REL4']==1);
			$('#LIGHT_CW').prop('value', data['LIGHT_CW']);
			$('#LIGHT_NW').prop('value', data['LIGHT_NW']);
			$('#LIGHT_WW').prop('value', data['LIGHT_WW']);
			$('#LOGSHOW').html("LOG HERE:"+JSON.stringify(data,null,'<br>'));
			

		});
		setTimeout('process()',2000);
	}

	function getI2CDevs(){
		$.getJSON(
		"/getdata",
		{page:"main1"},
		function(data){
			$('#DEVSHOW').html(data['DEVSHOW']);
    	});
	}

	</script>
	</body>
</html>